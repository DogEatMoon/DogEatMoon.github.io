<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes"
        />
        <title>ğŸ“‹ é»˜å¥‘å±€</title>
        <!-- ä½¿ç”¨ jsencrypt è¿›è¡Œ RSA åŠ å¯†ï¼ˆåˆ†æ®µï¼‰ -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js"></script>
        <style>
            * {
                box-sizing: border-box;
                font-family:
                    system-ui,
                    -apple-system,
                    "Segoe UI",
                    Roboto,
                    "Helvetica Neue",
                    sans-serif;
                margin: 0;
                padding: 0;
            }

            body {
                background: linear-gradient(145deg, #f0f4fa 0%, #e6ecf5 100%);
                min-height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 16px;
            }

            .challenge-card {
                max-width: 750px;
                width: 100%;
                background: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(8px);
                border-radius: 40px;
                box-shadow: 0 20px 40px rgba(0, 10, 30, 0.2);
                padding: 28px 24px;
                border: 1px solid rgba(255, 255, 255, 0.7);
            }

            h1 {
                font-size: 2rem;
                font-weight: 700;
                display: flex;
                align-items: center;
                gap: 8px;
                color: #1e2b3c;
                margin-bottom: 20px;
                border-left: 6px solid #3b6eff;
                padding-left: 20px;
            }

            h1 span {
                background: #1e2b3c;
                color: white;
                font-size: 1rem;
                padding: 4px 12px;
                border-radius: 60px;
            }

            /* é¢˜å· & å¯¼èˆª */
            .progress-row {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                flex-wrap: wrap;
                gap: 12px;
            }

            .badge {
                background: #1e2b3c;
                color: white;
                padding: 8px 18px;
                border-radius: 60px;
                font-weight: 500;
                font-size: 1.1rem;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                min-width: 80px;
                text-align: center;
            }

            .nav-buttons {
                display: flex;
                gap: 12px;
            }

            .nav-btn {
                background: white;
                border: none;
                padding: 10px 24px;
                border-radius: 60px;
                font-weight: 600;
                font-size: 1rem;
                color: #1e2b3c;
                box-shadow: 0 6px 14px rgba(59, 110, 255, 0.15);
                cursor: pointer;
                transition: all 0.15s;
                border: 1px solid rgba(255, 255, 255, 0.7);
            }

            .nav-btn:not(:disabled):hover {
                background: #f0f4ff;
                transform: scale(1.02);
                border-color: #3b6eff;
            }

            .nav-btn:disabled {
                opacity: 0.4;
                cursor: not-allowed;
                background: #eef2f7;
            }

            .submit-btn {
                background: #3b6eff !important;
                color: white !important;
                border-color: #8bb1ff !important;
            }

            /* é¢˜ç›®å¡ç‰‡ */
            .question-box {
                background: white;
                border-radius: 28px;
                padding: 28px 24px;
                margin-bottom: 24px;
                box-shadow:
                    inset 0 1px 3px rgba(0, 0, 0, 0.02),
                    0 10px 25px rgba(0, 20, 50, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.8);
            }

            .question-text {
                font-size: 1.7rem;
                font-weight: 700;
                color: #0b1a2a;
                margin-bottom: 32px;
                word-break: break-word;
            }

            .options {
                display: flex;
                flex-direction: column;
                gap: 14px;
            }

            .options label {
                display: flex;
                align-items: center;
                padding: 16px 22px;
                background: #f8fafd;
                border-radius: 60px;
                font-size: 1.25rem;
                font-weight: 500;
                color: #1e2b3c;
                border: 2px solid transparent;
                transition: 0.15s;
                cursor: pointer;
            }

            .options label:hover {
                background: #e9effa;
                border-color: #a0bbff;
            }

            .options input[type="radio"] {
                appearance: none;
                width: 24px;
                height: 24px;
                border: 2px solid #9aa9b9;
                border-radius: 50%;
                margin-right: 20px;
                background: white;
                flex-shrink: 0; /* é˜²æ­¢åœ¨å¤šè¡Œæ–‡å­—æ—¶è¢«å‹ç¼©å˜å½¢ */
            }

            .options input[type="radio"]:checked {
                border-color: #3b6eff;
                background-color: #3b6eff;
                box-shadow: inset 0 0 0 5px white;
            }

            /* å¯†æ–‡å¡ç‰‡ (åˆå§‹éšè—) */
            .cipher-card {
                background: #1e2b3c;
                border-radius: 28px;
                padding: 28px 24px;
                margin-top: 10px;
                color: #edf2f9;
                display: none;
                border: 2px solid #5d8aff;
            }

            .cipher-title {
                font-size: 1.5rem;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 20px;
            }

            .cipher-textarea {
                width: 100%;
                background: #0f1a24;
                border: 2px solid #314b62;
                border-radius: 20px;
                padding: 18px;
                font-size: 1.2rem;
                line-height: 1.5;
                color: #dbe9ff;
                resize: vertical;
                font-family: "Fira Code", monospace;
                outline: none;
                margin-bottom: 20px;
                word-break: break-all;
            }

            .copy-btn {
                background: #3b6eff;
                border: none;
                padding: 14px 28px;
                border-radius: 60px;
                font-size: 1.2rem;
                font-weight: 600;
                color: white;
                cursor: pointer;
                transition: 0.15s;
                border: 1px solid #8bb1ff;
                width: 100%;
            }

            .copy-btn:hover {
                background: #2952d0;
            }

            .footer-note {
                text-align: center;
                margin-top: 16px;
                color: #536e82;
                font-size: 0.95rem;
            }
        </style>
    </head>
    <body>
        <div class="challenge-card" role="main">
            <h1>
                é»˜å¥‘å±€
                <span>èº«å¤–é’å±±åˆ›å»º</span>
            </h1>

            <!-- ç­”é¢˜åŒºåŸŸ (åŒ…å«è¿›åº¦ã€é¢˜ç›®ã€å¯¼èˆª) æäº¤åå°†éšè— -->
            <div id="quizArea">
                <!-- è¿›åº¦ + å¯¼èˆªï¼ˆä¸‹ä¸€é¢˜æŒ‰é’®ä¼šå˜æäº¤ï¼‰ -->
                <div class="progress-row">
                    <div class="badge" id="questionIndexDisplay"></div>
                    <!-- åˆå§‹ç•™ç©ºï¼Œç”±JSåŠ¨æ€å¡«å…… -->
                    <div class="nav-buttons">
                        <button class="nav-btn" id="prevBtn" disabled>
                            â† ä¸Šä¸€é¢˜
                        </button>
                        <button class="nav-btn" id="nextBtn">ä¸‹ä¸€é¢˜ â†’</button>
                    </div>
                </div>

                <!-- é¢˜ç›®å¡ç‰‡ -->
                <div class="question-box">
                    <div class="question-text" id="questionText">åŠ è½½ä¸­...</div>
                    <div class="options" id="optionsContainer"></div>
                </div>
            </div>

            <!-- å¯†æ–‡å¡ç‰‡ (åˆå§‹éšè—) -->
            <div class="cipher-card" id="cipherCard">
                <div class="cipher-title">
                    <span>ğŸ”’ ä½ çš„å¯†æ–‡ (å¯å¤åˆ¶)</span>
                </div>
                <textarea
                    id="cipherText"
                    class="cipher-textarea"
                    rows="4"
                    readonly
                    placeholder="åŠ å¯†åçš„å¯†æ–‡å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."
                ></textarea>
                <button class="copy-btn" id="copyCipherBtn">
                    ğŸ“‹ å¤åˆ¶å¯†æ–‡åˆ°å‰ªè´´æ¿
                </button>
                <div class="footer-note">
                    å°†è¯¥å¯†æ–‡ï¼ˆé€šå¸¸ä¸ä¼šé•¿åˆ°æ— æ³•å‘é€ï¼‰ï¼Œå‘é€ç»™é¢˜ä¸»ï¼Œé¢˜ä¸»ä¹Ÿè®¸ä¼šå‘Šè¯‰ä½ ä½œç­”æƒ…å†µ
                </div>
            </div>

            <div class="footer-note" style="margin-top: 16px">
                <p>âš¡ä¸ºä»€ä¹ˆä¸ç”¨å°ç¨‹åºï¼Ÿå› ä¸ºéƒ½æœ‰ç°æˆçš„åŠæ³•è·å¾—ç­”æ¡ˆã€‚</p>
                <p>ä¾‹å­è¯¦æƒ…è§https://github.com/NULL11034/moqijuansview</p>
            </div>
        </div>

        <script>
            (function () {
                // ---------- é¢˜åº“ (æ”¯æŒæœ€å¤š10ä¸ªé€‰é¡¹) ----------
                const questions = [
                    {
                        question: "æˆ‘çš„qåŒºç‹è€…è´¦å·åå­—æ˜¯",
                        options: [
                            "èº«å¤–é’å±±",
                            "ä¸è¦è‚˜ç‹—",
                            "å •æ—¥çšæœˆ",
                            "åœ°å¿ƒå¼•åŠ›",
                        ],
                    },
                    {
                        question: "ä»¥ä¸‹æ€æƒ³ä¸­ï¼Œæˆ‘æœ€å–œæ¬¢å“ªä¸€ä¸ª",
                        options: ["å¢¨å®¶", "é“å®¶", "é˜´é˜³å®¶", "é©¬å…‹æ€ä¸»ä¹‰"],
                    },
                    {
                        question: "æˆ‘åœ¨åˆä¸­æ¯•ä¸šæ—¶æ‹¥æœ‰å‡ ä¸ªæœ‹å‹",
                        options: ["1", "2", "3", "4", "5", "6"],
                    },
                    {
                        question: "ä»¥ä¸‹æ­Œæ›²ä¸­ï¼Œæˆ‘ä¼šæœ€å–œæ¬¢å“ªä¸ªï¼ˆéšä¾¿æ‰¾çš„ï¼‰",
                        options: [
                            "ã€Šæµ·æœˆåŸã€‹",
                            "ã€Šç›—å¢“ç¬”è®°Â·åå¹´äººé—´ã€‹",
                            "ã€Šé»‘å¤œé—®ç™½å¤©ã€‹",
                            "ã€Šä¸€é¦–æƒ³ä¸é€šçš„å¤é£ã€‹",
                        ],
                    },
                    {
                        question: "æˆ‘ä½¿ç”¨æ—¶é—´æœ€é•¿çš„ä»£ç ç¼–è¾‘å™¨æ˜¯",
                        options: [
                            "vim",
                            "emacs",
                            "neovim",
                            "zed",
                            "vscode",
                            "JBå…¨å®¶æ¡¶",
                            "VS",
                        ],
                    },
                    {
                        question: "æˆ‘å¯¹ä¸€ä¸ªäººçš„åˆ¤æ–­ä¾§é‡äº",
                        options: ["å¤–è²Œ", "æ€§æ ¼", "çµé­‚", "ç›´è§‰"],
                    },
                    {
                        question: "ä¸‹åˆ—ä½œå“ä¸­ï¼Œæˆ‘æœ€å–œæ¬¢çš„æ˜¯",
                        options: [
                            "ã€Šç›—å¢“ç¬”è®°ã€‹",
                            "ã€Šå…¨èŒçŒäººã€‹",
                            "ã€Šå…¨èŒé«˜æ‰‹ã€‹",
                            "ã€Šåæ—¥ç»ˆç„‰ã€‹",
                            "ã€Šè¯¡ç§˜ä¹‹ä¸»ã€‹",
                            "æˆ‘ä»¥ä¸Šéƒ½æ²¡çœ‹è¿‡/ä¸å–œæ¬¢",
                        ],
                    },
                    {
                        question: "ä¸‹åˆ—é¢œè‰²ä¸­ï¼Œæˆ‘æœ€å–œæ¬¢",
                        options: [
                            "æµ…ç´«è‰²",
                            "æ·±ç´«è‰²",
                            "ç¾¤é’è‰²",
                            "å…‹è±å› è“",
                            "æ™®é²å£«è“(bushi)",
                        ],
                    },
                    {
                        question: "ä¸‹åˆ—å¥å­ä¸­ï¼Œæˆ‘ä¼šæ›´å–œæ¬¢çš„æ˜¯ï¼ˆåŒæ ·éšä¾¿æ‰¾çš„ï¼‰",
                        options: [
                            "ä½ è¯´äººç”Ÿæ˜¯æ—·é‡ æˆ‘å´å›°åœ¨é»‘å¤œ",
                            "æŠ“äº†ä¸¤æŠŠæœˆå…‰ åŸ‹åœ¨åäº”å…­å²å¹´çºª",
                            "ä½ è¯´æŠŠçˆ±æ¸æ¸æ”¾ä¸‹ä¼š èµ°æ›´è¿œ",
                            "åˆ«å†äº’ç›¸æŠ˜ç£¨ å› ä¸ºæˆ‘ä»¬éƒ½æœ‰é”™",
                        ],
                    },
                    {
                        question: "ä¸‹åˆ—å¥å­ä¸­ï¼Œå“ªå¥æ›´æ¥è¿‘æˆ‘çš„é£æ ¼",
                        options: [
                            "è®°å¿†åƒä¸€åªç—…å¼±çš„è´è¶ï¼Œæ¯æ­»åœ¨é‚£å¹´å¤å¤©",
                            "æ„¿ä½ çš„â€œå¹¸å¥½â€ï¼Œå¤šäºâ€œè‹¥å½“åˆâ€",
                            "æ‹œæ‰˜ä½ éƒ½çœ‹åˆ°è¿™é‡Œå•¦ï¼Œæœ‰ç‚¹è€å¿ƒå¥½ä¸å¥½å–‚",
                            "æˆ‘å¯èƒ½ä¼šé—®ä»–è¦ä¸è¦åŠ çœ¼æ³ªï¼Œä¹Ÿå¯èƒ½åœ¨è¯´è¿™å¥è¯çš„æ—¶å€™çœ¼æ³ªå°±ä¸äº‰æ°”åœ°æµä¸‹æ¥",
                        ],
                    },
                ];

                // ---------- ç”¨æˆ·æä¾›çš„ RSA å…¬é’¥ (PEMæ ¼å¼) ----------
                const PUBLIC_KEY = `-----BEGIN PUBLIC KEY-----
            MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAjNXo1pEDEgmAs3hyfyYx
            9kYiAfEnGezC8GMqp7/I6ZQ/EODLF6yUIs9ceStq28AF/ETMkDlk54krxWTjageB
            BJI1UpxBSWVd0J1nu1leVmg5HBtNGQnzE7Bl0jt8IbtwJpQEn1lsug147Nd4DEIT
            npmNXh0z53h3kSDgW64/BxIyhdf/4tAwbvF8gW4rnehKzpVYdMe2+mAqXMUJUZ87
            /FFAB0mykFfTMKTbejUc5OjkRx61fJ+sGmmK/+efGS8L3ZvvvWLTMHVKgV2ehjeN
            m6fH9E8Xn97nqVJsLNr7mcXulib/RPKSOM//nUuL3xyULDWzjT2uc/sbHS2YsdG4
            yQIDAQAB
            -----END PUBLIC KEY-----`;

                // ---------- å›ºå®šç›å€¼ (æŒ‰è¦æ±‚) ----------
                const FIXED_SALT = "#@SALT_DOGEATMOON@#";

                // ---------- åˆ†æ®µåŠ å¯†é…ç½® ----------
                const MAX_SEGMENT_LENGTH = 100; // æ¯æ®µæ˜æ–‡å­—ç¬¦æ•°
                const SEGMENT_DELIMITER = "||"; // åˆ†æ®µåˆ†éš”ç¬¦

                // ---------- çŠ¶æ€ ----------
                const totalQuestions = questions.length;
                let currentIndex = 0;
                // åˆå§‹åŒ–ç­”æ¡ˆå…¨éƒ¨ä¸º 'A'
                let answers = questions.map(() => "A");

                // è®°å½•å¼€å§‹æ—¶é—´ (é¡µé¢åŠ è½½æ—¶)
                const startTime = Date.now();

                // è¡Œä¸ºæ—¥å¿—æ•°ç»„ (å­˜å‚¨ç´§å‡‘æ ¼å¼å­—ç¬¦ä¸²ç‰‡æ®µ)
                let behaviorLog = [];

                // DOM å…ƒç´ 
                const quizArea = document.getElementById("quizArea");
                const questionTextEl = document.getElementById("questionText");
                const optionsContainer =
                    document.getElementById("optionsContainer");
                const questionIndexEl = document.getElementById(
                    "questionIndexDisplay",
                );
                const prevBtn = document.getElementById("prevBtn");
                const nextBtn = document.getElementById("nextBtn");
                const cipherCard = document.getElementById("cipherCard");
                const cipherText = document.getElementById("cipherText");
                const copyCipherBtn = document.getElementById("copyCipherBtn");

                // ---------- è¾…åŠ©å‡½æ•° ----------
                // è®°å½•æ—¥å¿— (ç±»å‹: S=start, E=enter, L=select, U=submit)
                // ç±»å‹ç”¨å•ä¸ªå¤§å†™å­—æ¯ï¼Œåè·Ÿé¢˜ç›®ç´¢å¼•(1-based)ï¼Œé€‰é¡¹(ä»…select)
                function logEvent(type, qIndex, option = null) {
                    const relativeTime = Date.now() - startTime; // æ¯«ç§’
                    // å°†é¢˜ç›®ç´¢å¼•è½¬æ¢ä¸º1-based (ä½†ä¿ç•™-1ä¸ºå…¨å±€)
                    const displayIndex = qIndex === -1 ? -1 : qIndex + 1;
                    let entry = type + displayIndex; // ä¾‹å¦‚ "E1"
                    if (option !== null) {
                        entry += option; // ä¾‹å¦‚ "L1A"
                    }
                    entry += "@" + relativeTime;
                    behaviorLog.push(entry);
                    console.log("LOG:", entry);
                }

                // æ£€æŸ¥å½“å‰é¢˜ç›®çš„ç­”æ¡ˆæ˜¯å¦æœ‰æ•ˆ
                function validateAnswerForCurrent() {
                    const optCount = questions[currentIndex].options.length;
                    const currentLetter = answers[currentIndex];
                    const letterIndex = currentLetter.charCodeAt(0) - 65;
                    if (letterIndex >= optCount) {
                        answers[currentIndex] = "A";
                    }
                }

                // æ¸²æŸ“å½“å‰é¢˜ç›®
                function renderCurrentQuestion() {
                    validateAnswerForCurrent();

                    const q = questions[currentIndex];
                    questionTextEl.innerText = q.question;

                    // ç”Ÿæˆé€‰é¡¹
                    let htmlStr = "";
                    q.options.forEach((opt, idx) => {
                        const letter = String.fromCharCode(65 + idx);
                        const checked =
                            answers[currentIndex] === letter ? "checked" : "";
                        htmlStr += `<label><input type="radio" name="option" value="${letter}" ${checked}> ${opt}</label>`;
                    });
                    optionsContainer.innerHTML = htmlStr;

                    // æ›´æ–°é¢˜å· (åŠ¨æ€ï¼Œæ— ç¡¬ç¼–ç )
                    questionIndexEl.innerText = `${currentIndex + 1} / ${totalQuestions}`;

                    // å¯¼èˆªæŒ‰é’®çŠ¶æ€
                    prevBtn.disabled = currentIndex === 0;
                    // ä¸‹ä¸€é¢˜æŒ‰é’®ï¼šå¦‚æœæ˜¯æœ€åä¸€é¢˜ï¼Œå˜æˆâ€œæäº¤â€ï¼Œå¦åˆ™ä¸ºâ€œä¸‹ä¸€é¢˜â€
                    if (currentIndex === totalQuestions - 1) {
                        nextBtn.innerText = "ğŸ“® æäº¤";
                        nextBtn.classList.add("submit-btn");
                    } else {
                        nextBtn.innerText = "ä¸‹ä¸€é¢˜ â†’";
                        nextBtn.classList.remove("submit-btn");
                        nextBtn.disabled = false;
                    }

                    // è®°å½•è¿›å…¥é¢˜ç›®äº‹ä»¶
                    logEvent("E", currentIndex);
                }

                // å¤„ç†é€‰é¡¹å˜åŒ–
                function handleOptionChange(e) {
                    if (
                        e.target.tagName === "INPUT" &&
                        e.target.type === "radio"
                    ) {
                        const selectedLetter = e.target.value;
                        if (answers[currentIndex] !== selectedLetter) {
                            answers[currentIndex] = selectedLetter;
                            logEvent("L", currentIndex, selectedLetter);
                        }
                    }
                }

                // åˆ‡æ¢é¢˜ç›® (ä¸Šä¸€é¢˜)
                function goPrev() {
                    if (currentIndex > 0) {
                        currentIndex--;
                        renderCurrentQuestion();
                    }
                }

                // ä¸‹ä¸€é¢˜æˆ–æäº¤
                function handleNextOrSubmit() {
                    if (currentIndex === totalQuestions - 1) {
                        // æäº¤æ“ä½œ
                        handleEncrypt();
                    } else {
                        // æ­£å¸¸ä¸‹ä¸€é¢˜
                        if (currentIndex < totalQuestions - 1) {
                            currentIndex++;
                            renderCurrentQuestion();
                        }
                    }
                }

                // åˆ†æ®µåŠ å¯†å‡½æ•°
                function segmentEncrypt(plainText, publicKey) {
                    const encryptor = new JSEncrypt();
                    encryptor.setPublicKey(publicKey);

                    const segments = [];
                    for (
                        let i = 0;
                        i < plainText.length;
                        i += MAX_SEGMENT_LENGTH
                    ) {
                        const segment = plainText.substr(i, MAX_SEGMENT_LENGTH);
                        const encrypted = encryptor.encrypt(segment);
                        if (encrypted === false) {
                            throw new Error(
                                `åŠ å¯†å¤±è´¥ at segment starting at ${i}`,
                            );
                        }
                        segments.push(encrypted);
                    }
                    return segments.join(SEGMENT_DELIMITER);
                }

                // åŠ å¯†å‡½æ•° (æäº¤åéšè—ç­”é¢˜åŒºåŸŸï¼Œåªæ˜¾ç¤ºå¯†æ–‡)
                async function handleEncrypt() {
                    // è®°å½•æäº¤äº‹ä»¶
                    logEvent("U", currentIndex); // U=submit

                    const submitTime = Date.now();

                    // æ„å»ºç´§å‡‘æ ¼å¼å­—ç¬¦ä¸² (å·²ç§»é™¤IPå­—æ®µ)
                    const answersStr = answers.join(" ");
                    const logStr = behaviorLog.join(";");
                    const plainData = `answers:${answersStr}|start:${startTime}|submit:${submitTime}|log:${logStr}`;

                    // åŠ ç›
                    const plainWithSalt = plainData + FIXED_SALT + submitTime;

                    // åŠ å¯†
                    if (!PUBLIC_KEY) {
                        alert(
                            "é”™è¯¯ï¼šæœªè®¾ç½®RSAå…¬é’¥ã€‚è¯·å…ˆåœ¨ä»£ç ä¸­å¡«å…¥æ‚¨çš„å…¬é’¥ã€‚",
                        );
                        return;
                    }

                    try {
                        const encrypted = segmentEncrypt(
                            plainWithSalt,
                            PUBLIC_KEY,
                        );

                        // éšè—ç­”é¢˜åŒºåŸŸ
                        quizArea.style.display = "none";

                        // æ˜¾ç¤ºå¯†æ–‡å¡ç‰‡
                        cipherText.value = encrypted;
                        cipherCard.style.display = "block";
                        cipherCard.scrollIntoView({
                            behavior: "smooth",
                            block: "nearest",
                        });
                    } catch (e) {
                        alert("åŠ å¯†å¤±è´¥ï¼š" + e.message);
                    }
                }

                // å¤åˆ¶å¯†æ–‡
                async function copyCipher() {
                    const text = cipherText.value;
                    if (!text) {
                        alert("æ²¡æœ‰å¯å¤åˆ¶çš„å¯†æ–‡");
                        return;
                    }
                    try {
                        await navigator.clipboard.writeText(text);
                        const original = copyCipherBtn.innerText;
                        copyCipherBtn.innerText = "âœ… å·²å¤åˆ¶ï¼";
                        setTimeout(() => {
                            copyCipherBtn.innerText = original;
                        }, 1500);
                    } catch (err) {
                        alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶");
                    }
                }

                // ---------- äº‹ä»¶ç»‘å®š ----------
                optionsContainer.addEventListener("change", handleOptionChange);

                prevBtn.addEventListener("click", goPrev);
                nextBtn.addEventListener("click", handleNextOrSubmit);

                copyCipherBtn.addEventListener("click", copyCipher);

                // åˆå§‹åŒ–æ¸²æŸ“
                renderCurrentQuestion();

                // è®°å½•å¼€å§‹äº‹ä»¶ (å…¨å±€å¼€å§‹)
                logEvent("S", -1);
            })();
        </script>
    </body>
</html>
